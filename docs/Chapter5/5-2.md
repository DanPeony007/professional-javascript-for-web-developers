# Array 类型

ECMAScript 数组的每一项可以保存任何类型的数据。

## 1. 创建方式
#### 1. 使用 Array 构造函数
`var colors = new Array()` // 创建一个空数组 <br>
`var colors = new Array(3);` // 创建一个包含3项的数组 <br>
`var names = new Array("Greg")` // 创建一个包含1项，即字符串"Greg"的数组 <br>
`var colors = new Array("red", "blue", "green");` // 创建一个包含3个字符串的数组 <br>
如果传递的是数值，则会按照该数值创建包含给定项数的数组； <br>
如果传递的是其他类型的参数，则会创建包含那个值的只有一项的数组。 <br>

可以省略 new 操作符，Array() 和 new Array() 相同。 <br>
`var colors = Array(3);` <br>

#### 2. 使用数组字面量表示法
`var names = []` // 创建一个空数组 <br>
`var colors = ["red", "blue", "green"]` // 创建一个包含3个字符串的数组 <br>

以下创建有问题： <br>
`var values = [1,2,];` // 不要这样! 这样会创建一个包含2或3项的数组 <br>
在数组字面量的最后一项添加逗号：在 IE 中，values 会成为一个包含 3 个项且每项的值分别为 1、2 和 undefined 的数组；在其他浏览器中，values 会成为一个包含 2 项且值分别为 1 和 2 的数组。 <br>

注意：在使用数组字面量表示法时，也不会调用 Array 构造函数 (Firefox 3 及更早版本除外)。 <br>

## 2. 读取和设置值
读取值：数组[基于0的数字索引] <br>
设置值：数组[基于0的数字索引] = 值 （索引存在为修改，不存在为新增） <br>

数组长度：数组.length（不是只读） <br>
设置这个属性，可以从数组的末尾移除项或向数组中添加新项。 <br>
利用 length 属性也可以方便地在数组末尾添加新项 `colors[colors.length] = "black";` <br>
数组最多可以包含 4 294 967 295 个项。 <br>

## 3. 检测数组
#### 1. instanceof 操作符
适用于只有一个全局执行环境。 <br>

#### 2. Array.isArray()  -- ECMAScript 5 新增方法
最终确定某个值到底是不是数组，而不管它是在哪个全局执行环境中创建的。 <br>
浏览器支持：IE9+、Firefox 4+、Safari 5+、Opera 10.5+ 和 Chrome。 <br>

## 4. 转换方法
#### 1. toString()
返回由数组中每个值的字符串形式拼接而成的一个以逗号分隔的字符串。 <br>
注意：alert() 要接收字符串参数，会在后台调用 toString() 方法。 <br>

#### 2. valueOf()
返回的还是数组。 <br>

#### 3. toLocaleString()
也会创建一个数组值的以逗号分隔的字符串。而与前两个方法唯一的不同之处在于，这一次为了取得每一项的值，调用的是每一项的 toLocaleString() 方法，而不是 toString()
方法。 <br>

#### 4. join('分隔符')   -- 数组转换为字符串拼接
如果不给 join() 方法传入任何值，或者给它传入 undefined，则使用**【逗号】**作为分隔符。 <br>
注意：如果数组中的某一项的值是 null 或者 undefined，那么该值在 join()、toLocaleString()、toString() 和 valueOf() 方法返回的结果中以空字符串表示。 <br>

## 5. 栈方法
栈是一种 LIFO(Last-In-First-Out，后进先出)的数据结构。 <br>
栈中项的插入(叫做推入)和移除(叫做弹出)，只发生在一个位置——栈的顶部。 <br>
push() 和 pop() 方法，可以实现类似栈的行为。 <br>

#### 1. push()
可以接收任意数量的参数，把它们逐个添加到数组末尾；返回修改后数组的长度。 <br>

#### 2. pop()
从数组末尾移除最后一项，减少数组的 length 值；返回移除的项。 <br>

## 6. 队列方法
队列数据结构的访问规则是 FIFO(First-In-First-Out，先进先出)。 <br>
结合使用 shift() 和 push() 方法，可以像使用队列一样使用数组。在列表的末端添加项，从列表的前端移除项。 <br>
同时使用 unshift() 和 pop() 方法，可以从相反的方向来模拟队列，即在数组的前端添加项，从数组末端移除项。 <br>

#### 1. shift()
移除数组中的第一个项并返回该项，同时将数组长度减 1。 <br>

#### 2. unshift()
在数组前端添加任意个项，并返回新数组的长度。 <br>

## 7. 重排序方法
#### 1. reverse()
反转数组项的顺序。 <br>

#### 2. sort()
在默认情况下，sort() 方法按升序排列数组项——即最小的值位于最前面，最大的值排在最后面。  <br>
为了实现排序，sort() 方法会调用每个数组项的 toString() 转型方法，然后比较得到的字符串，以确定如何排序。即使数组中的每一项都是数值，sort() 方法比较的也是字符串。 <br>

sort() 可以接收一个比较函数作为参数。比较函数接收两个参数，如果第一个参数应该位于第二个之前则返回一个负数，如果两个参数相等则返回 0，如果第一个参数应该位于第二个之后则返回一个正数。 <br>
```js
// 一个简单的比较函数，适用于大多数数据类型
function compare(a, b) {
    if (a < b) {
        return -1;  // 升序返回-1；降序返回1
    } else if (a > b) {
        return 1;  // 升序返回1；降序返回-1
    } else {
        return 0;
    }
}
// 更简单的比较函数，适用于数值类型或者其valueOf()方法会返回数值类型的对象类型
function compare(a, b){
    return a - b; // 升序a-b；降序b-a
}
```

reverse() 和 sort() 方法的返回值是经过排序之后的数组。

## 8. 操作方法
#### 1. concat()
基于当前数组中的所有项创建一个新数组。 <br>
先创建当前数组一个副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组。 <br>
在没有给 concat() 方法传递参数的情况下，它只是复制当前数组并返回副本。如果传递给 concat() 方法的是一或多个数组，则该方法会将这些数组中的每一项都添加到结果数组中。如果传递的值不是数组，这些值就会被简单地添加到结果数组的末尾。 <br>

#### 2. slice(起始位置，结束位置)
基于当前数组中的一或多个项创建一个新数组。 <br>

在只有一个参数的情况下，slice() 方法返回从该参数指定位置开始到当前数组末尾的所有项。如果有两个参数，该方法返回起始和结束位置之间的项，但不包括结束位置的项。 <br>
如果 slice() 方法的参数中有一个负数，则用数组长度加上该数来确定相应的位置。（或者理解为从后往前截取） <br>
如果结束位置小于起始位置，则返回空数组。 <br>

注意，slice() 方法不会影响原始数组。 <br>

#### 3. splice(起始位置，删除项数，插入项1，插入项2...)
splice() 方法始终都会返回一个数组，该数组中包含从原始数组中删除的项(如果没有删除任何项，则返回一个空数组)。 <br>

## 9. 位置方法
#### 1. indexOf()
从数组的开头开始向后查找。 <br>

#### 2. lastIndexOf()
从数组的末尾开始向前查找。 <br>

这两个方法都接收两个参数：要查找的项 和 表示查找起点位置的索引(可选的)。 <br>
都返回要查找的项在数组中的位置，没找到的情况下返回-1。 <br>
在比较查找项与数组中的每一项时，会使用全等操作符。 <br>
浏览器支持：IE9+、Firefox 2+、Safari 3+、Opera 9.5+和 Chrome。 <br>

## 10. 迭代方法
#### 1. every() 全都...
查询数组中的项是否满足某个条件。如果该函数对每一项都返回 true，则返回 true。 <br>

#### 2. some() 存在...
查询数组中的项是否满足某个条件。如果该函数对任一项返回 true，则返回 true。 <br>

#### 3. filter() 筛选
确定是否在返回的数组中包含某一项。返回该函数会返回 true 的项组成的数组。 <br>
应用：查询符合某些条件的所有数组项。 <br>

#### 4. map() 映射
返回一个新数组，每一项都是在原始数组中的对应项上运行传入函数的结果。 <br>
应用：创建包含的项与另一个数组一一对应的数组。 <br>

#### 5. forEach() 遍历
对数组中的每一项运行给定函数。这个方法没有返回值。 <br>
本质上与使用 for 循环迭代数组一样。 <br>

每个方法都接收两个参数：要在每一项上运行的函数 和 运行该函数的作用域对象 (可选的)--影响 this 的值。 <br>
函数会接收三个参数：数组项的值、该项在数组中的位置 和 数组对象本身（item，index，array）。 <br>
这几个方法都不会修改原数组。 <br>
浏览器支持：IE9+、Firefox 2+、Safari 3+、Opera 9.5+ 和 Chrome。 <br>

## 11. 归并方法
迭代数组的所有项，然后构建一个最终返回的值。 <br>

#### 1. reduce()
从数组的第一项开始，逐个遍历到最后。 <br>

#### 2. reduceRight()
从数组的最后一项开始，向前遍历到第一项。 <br>

这两个方法都接收两个参数：一个在每一项上调用的函数 和 作为归并基础的初始值(可选的)。 <br>
函数接收 4 个参数：前一个值、当前值、项的索引 和 数组对象。 <br>
这个函数返回的任何值都会作为第一个参数自动传给下一项。 <br>
第一次迭代发生在数组的第二项上，因此第一个参数是数组的第一项，第二个参数就是数组的第二项。 <br>
```js
var values = [1,2,3,4,5];
var sum = values.reduce(function(prev, cur, index, array){
    return prev + cur;
});
alert(sum); //15
```

使用 reduce() 还是 reduceRight()，主要取决于要从哪头开始遍历数组。除此之外，它们完全相同。 <br>
浏览器支持：IE9+、Firefox 3+、Safari 4+、Opera 10.5 和 Chrome。 <br>