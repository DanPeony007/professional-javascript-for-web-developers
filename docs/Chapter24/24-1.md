# 可维护性
## 1. 什么是可维护的代码
**可理解性**——其他人可以接手代码并理解它的意图和一般途径，而无需原开发人员的完整解释。 <br>
**直观性**——代码中的东西一看就能明白，不管其操作过程多么复杂。 <br>
**可适应性**——代码以一种数据上的变化不要求完全重写的方法撰写。 <br>
**可扩展性**——在代码架构上已考虑到在未来允许对核心功能进行扩展。 <br>
**可调试性**——当有地方出错时，代码可以给予你足够的信息来尽可能直接地确定问题所在。 <br>

## 2. 代码约定
**可读性**： <br>
可读性与代码作为文本文件的格式化方式有关。大部分是和代码的**缩进**相关的。可读性的另一方面是**注释**。（ 函数和方法、 大段代码、 复杂的算法、 Hack） <br>

**变量和函数命名**： <br>
变量名应为名词如 car 或 person 。 <br>
函数名应该以动词开始，如 getName()。返回布尔类型值的函数一般以 is 开头，如 isEnable() 。 <br>
变量和函数都应使用合乎逻辑的名字，不要担心长度。 <br>

**变量类型透明**： <br>
JavaScript 中变量是松散类型的，很容易就忘记变量所应包含的数据类型，可使用合适的命名方式来处理。 <br>
三种表示变量数据类型的方式： <br>
1）初始化，暗示将来应该如何应用 `var found = false; //布尔型` <br>
2）匈牙利标记法（变量名之前加上一个或多个字符来表示数据类型）`var bFound; //布尔型`  <br>
缺点是让代码某种程度上难以阅读 <br>
3）使用类型注释（变量名右边 初始化前面）`var found /*:Boolean*/ = false;`  <br>
缺点是不能用多行注释一次注释大块的代码 <br>

## 3. 松散耦合
只要应用的某个部分过分依赖于另一部分，代码就是耦合过紧，难于维护。 <br>
典型问题：对象直接引用另一个对象，当修改其中一个的同时需要修改另外一个。 <br>

**解耦 HTML/JavaScript** <br>
一种最常见的耦合类型是 HTML/JavaScript 耦合。 <br>
1）直接写在 HTML 中的 JavaScript，使用包含内联代码的 `<script>` 元素或者是使用 HTML 属性来分配事件处理程序，都是过于紧密的耦合。 <br>
理想情况，HTML 和 JavaScript 完全分离，通过外部文件和使用 DOM 附加行为来包含 JavaScript。 <br>
2）JavaScript 包含 HTML 也会导致紧密耦合。 <br>
应避免在 JavaScript 中创建大量 HTML。 <br>

将 HTML 和 JavaScript 解耦可以在调试过程中节省时间，更加容易确定错误的来源，也减轻维护的难度：更改行为只需要在 JavaScript 文件中进行，更改标记则只要在渲染文件中。 <br>

**解耦 CSS/JavaScript** <br>
1）最常见的紧密耦合是使用 JavaScript来更改某些样式。 <br>
不能完全将 CSS 和 JavaScript解耦，但可以让耦合更松散。通过动态更改样式类而非特定样式来实现。 <br>

2）在 CSS 中通过表达式嵌入 JavaScript（仅会在 IE 中出现） <br>
避免使用表达式。 <br>

**解耦应用逻辑／事件处理程序** <br>
将应用逻辑和事件处理程序相分离，两者分别处理各自的东西。 <br>
一个事件处理程序应该从事件对象中提取相关信息，并将这些信息传送到处理应用逻辑的某个方法中。 <br>

牢记应用和业务逻辑之间松散耦合的几条原则： <br>
勿将 event 对象传给其他方法；只传来自 event 对象中所需的数据； <br>
任何可以在应用层面的动作都应该可以在不执行任何事件处理程序的情况下进行； <br>
任何事件处理程序都应该处理事件，然后将处理转交给应用逻辑。 <br>

## 4. 编程实践
**尊重对象所有权** <br>
默认情况下所有对象都是可以修改的。 <br>
在企业环境中最重要的编程实践就是尊重对象所有权，不能修改不属于你的对象。 <br>
更具体地说： <br>
不要为实例或原型添加属性； <br>
不要为实例或原型添加方法； <br>
不要重定义已存在的方法。 <br>

为对象创建新的功能： <br>
创建包含所需功能的新对象，并用它与相关对象进行交互； <br>
创建自定义类型，继承需要进行修改的类型。然后可以为自定义类型添加额外功能。 <br>

**避免全局量** <br>
尽可能避免全局变量和函数。最多创建一个全局变量，让其他对象和函数存在其中。 <br>
**命名空间**：包括创建一个用于放置功能的对象。 <br>

**避免与 null 进行比较** <br>
最常见的类型检测就是查看某个值是否为 null。 <br>
如果值应为一个引用类型，使用 instanceof 操作符检查其构造函数； <br>
如果值应为一个基本类型，使用 typeof 检查其类型； <br>
如果是希望对象包含某个特定的方法名，使用 typeof 操作符确保指定名字的方法存在于对象上。 <br>

**使用常量** <br>
JavaScript 没有常量的正式概念，但还是很有用。 <br>
这种将数据从应用逻辑分离出来的思想，可以在不冒引入错误的风险的同时，就改变数据。 <br>

注意的几种值的类型： <br>
**重复值** —— 任何在多处用到的值都应抽取为一个常量。限制了当一个值变了而另一个没变的时候会造成的错误。 <br>
**用户界面字符串** —— 任何用于显示给用户的字符串，都应被抽取出来以方便国际化。 <br>
**URLs** —— 在 Web 应用中，资源位置很容易变更，推荐用一个公共地方存放所有的 URL。 <br>
**任意可能会更改的值** —— 字面量值在未来会变化，就应该被提取出来作为一个常量。 <br>